<html lang="en">
<head>
<title>Embedded Mode Overview - GNU Emacs Calc Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Emacs Calc Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Using-Calc.html#Using-Calc" title="Using Calc">
<link rel="prev" href="Standalone-Operation.html#Standalone-Operation" title="Standalone Operation">
<link rel="next" href="Other-C_002dx-_002a-Commands.html#Other-C_002dx-_002a-Commands" title="Other C-x * Commands">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents Calc, the GNU Emacs calculator, included with GNU Emacs 23.1.

Copyright (C) 1990, 1991, 2001, 2002, 2003, 2004,
2005, 2006, 2007, 2008, 2009, 2010 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being just ``GNU GENERAL
     PUBLIC LICENSE'', with the Front-Cover texts being ``A GNU
     Manual,'' and with the Back-Cover Texts as in (a) below.  A copy
     of the license is included in the section entitled ``GNU Free
     Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Embedded-Mode-Overview"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Other-C_002dx-_002a-Commands.html#Other-C_002dx-_002a-Commands">Other C-x * Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Standalone-Operation.html#Standalone-Operation">Standalone Operation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Using-Calc.html#Using-Calc">Using Calc</a>
<hr>
</div>

<h4 class="subsection">2.5.6 Embedded Mode (Overview)</h4>

<p class="noindent"><dfn>Embedded mode</dfn> is a way to use Calc directly from inside an
editing buffer.  Suppose you have a formula written as part of a
document like this:

<pre class="smallexample">     The derivative of
     
                                        ln(ln(x))
     
     is
</pre>
   <p class="noindent">and you wish to have Calc compute and format the derivative for
you and store this derivative in the buffer automatically.  To
do this with Embedded mode, first copy the formula down to where
you want the result to be, leaving a blank line before and after the
formula:

<pre class="smallexample">     The derivative of
     
                                        ln(ln(x))
     
     is
     
                                        ln(ln(x))
</pre>
   <p>Now, move the cursor onto this new formula and press <kbd>C-x * e</kbd>. 
Calc will read the formula (using the surrounding blank lines to tell
how much text to read), then push this formula (invisibly) onto the Calc
stack.  The cursor will stay on the formula in the editing buffer, but
the line with the formula will now appear as it would on the Calc stack
(in this case, it will be left-aligned) and the buffer's mode line will
change to look like the Calc mode line (with mode indicators like
&lsquo;<samp><span class="samp">12 Deg</span></samp>&rsquo; and so on).  Even though you are still in your editing
buffer, the keyboard now acts like the Calc keyboard, and any new result
you get is copied from the stack back into the buffer.  To take the
derivative, you would type <kbd>a d x &lt;RET&gt;</kbd>.

<pre class="smallexample">     The derivative of
     
                                        ln(ln(x))
     
     is
     
     1 / ln(x) x
</pre>
   <p>(Note that by default, Calc gives division lower precedence than multiplication,
so that &lsquo;<samp><span class="samp">1 / ln(x) x</span></samp>&rsquo; is equivalent to &lsquo;<samp><span class="samp">1 / (ln(x) x)</span></samp>&rsquo;.)

   <p>To make this look nicer, you might want to press <kbd>d =</kbd> to center
the formula, and even <kbd>d B</kbd> to use Big display mode.

<pre class="smallexample">     The derivative of
     
                                        ln(ln(x))
     
     is
     % [calc-mode: justify: center]
     % [calc-mode: language: big]
     
                                            1
                                         -------
                                         ln(x) x
</pre>
   <p>Calc has added annotations to the file to help it remember the modes
that were used for this formula.  They are formatted like comments
in the TeX typesetting language, just in case you are using TeX or
LaTeX. (In this example TeX is not being used, so you might want
to move these comments up to the top of the file or otherwise put them
out of the way.)

   <p>As an extra flourish, we can add an equation number using a
righthand label:  Type <kbd>d } (1) &lt;RET&gt;</kbd>.

<pre class="smallexample">     % [calc-mode: justify: center]
     % [calc-mode: language: big]
     % [calc-mode: right-label: " (1)"]
     
                                            1
                                         -------                      (1)
                                         ln(x) x
</pre>
   <p>To leave Embedded mode, type <kbd>C-x * e</kbd> again.  The mode line
and keyboard will revert to the way they were before.

   <p>The related command <kbd>C-x * w</kbd> operates on a single word, which
generally means a single number, inside text.  It searches for an
expression which &ldquo;looks&rdquo; like a number containing the point. 
Here's an example of its use:

<pre class="smallexample">     A slope of one-third corresponds to an angle of 1 degrees.
</pre>
   <p>Place the cursor on the &lsquo;<samp><span class="samp">1</span></samp>&rsquo;, then type <kbd>C-x * w</kbd> to enable
Embedded mode on that number.  Now type <kbd>3 /</kbd> (to get one-third),
and <kbd>I T</kbd> (the Inverse Tangent converts a slope into an angle),
then <kbd>C-x&nbsp;*&nbsp;w</kbd><!-- /@w --> again to exit Embedded mode.

<pre class="smallexample">     A slope of one-third corresponds to an angle of 18.4349488229 degrees.
</pre>
   <!-- [fix-ref Embedded Mode] -->
   <p>See <a href="Embedded-Mode.html#Embedded-Mode">Embedded Mode</a>, for full details.

   </body></html>

