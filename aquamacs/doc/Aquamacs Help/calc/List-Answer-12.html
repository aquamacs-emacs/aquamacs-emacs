<html lang="en">
<head>
<title>List Answer 12 - GNU Emacs Calc Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Emacs Calc Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Answers-to-Exercises.html#Answers-to-Exercises" title="Answers to Exercises">
<link rel="prev" href="List-Answer-11.html#List-Answer-11" title="List Answer 11">
<link rel="next" href="List-Answer-13.html#List-Answer-13" title="List Answer 13">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents Calc, the GNU Emacs calculator, included with GNU Emacs 23.1.

Copyright (C) 1990, 1991, 2001, 2002, 2003, 2004,
2005, 2006, 2007, 2008, 2009, 2010 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being just ``GNU GENERAL
     PUBLIC LICENSE'', with the Front-Cover texts being ``A GNU
     Manual,'' and with the Back-Cover Texts as in (a) below.  A copy
     of the license is included in the section entitled ``GNU Free
     Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="List-Answer-12"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="List-Answer-13.html#List-Answer-13">List Answer 13</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="List-Answer-11.html#List-Answer-11">List Answer 11</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Answers-to-Exercises.html#Answers-to-Exercises">Answers to Exercises</a>
<hr>
</div>

<h4 class="subsection">3.7.30 List Tutorial Exercise 12</h4>

<p class="noindent">This problem can be made a lot easier by taking advantage of some
symmetries.  First of all, after some thought it's clear that the
&lsquo;<samp><span class="samp">y</span></samp>&rsquo; axis can be ignored altogether.  Just pick a random &lsquo;<samp><span class="samp">x</span></samp>&rsquo;
component for one end of the match, pick a random direction
<!-- @math{\theta}, -->
&lsquo;<samp><span class="samp">theta</span></samp>&rsquo;,
and see if &lsquo;<samp><span class="samp">x</span></samp>&rsquo; and
<!-- @math{x + \cos \theta} -->
&lsquo;<samp><span class="samp">x + cos(theta)</span></samp>&rsquo;
(which is the &lsquo;<samp><span class="samp">x</span></samp>&rsquo; coordinate of the other endpoint) cross a line. 
The lines are at integer coordinates, so this happens when the two
numbers surround an integer.

   <p>Since the two endpoints are equivalent, we may as well choose the leftmost
of the two endpoints as &lsquo;<samp><span class="samp">x</span></samp>&rsquo;.  Then &lsquo;<samp><span class="samp">theta</span></samp>&rsquo; is an angle pointing
to the right, in the range -90 to 90 degrees.  (We could use radians, but
it would feel like cheating to refer to &lsquo;<samp><span class="samp">pi/2</span></samp>&rsquo; radians while trying
to estimate &lsquo;<samp><span class="samp">pi</span></samp>&rsquo;!)

   <p>In fact, since the field of lines is infinite we can choose the
coordinates 0 and 1 for the lines on either side of the leftmost
endpoint.  The rightmost endpoint will be between 0 and 1 if the
match does not cross a line, or between 1 and 2 if it does.  So:
Pick random &lsquo;<samp><span class="samp">x</span></samp>&rsquo; and
<!-- @math{\theta}, -->
&lsquo;<samp><span class="samp">theta</span></samp>&rsquo;,
compute
<!-- @math{x + \cos \theta}, -->
&lsquo;<samp><span class="samp">x + cos(theta)</span></samp>&rsquo;,
and count how many of the results are greater than one.  Simple!

   <p>We can make this go a bit faster by using the <kbd>v .</kbd> and <kbd>t .</kbd>
commands.

<pre class="smallexample">     1:  [0.52, 0.71, ..., 0.72]    2:  [0.52, 0.71, ..., 0.72]
         .                          1:  [78.4, 64.5, ..., -42.9]
                                        .
     
     v . t . 1. v b 100 &lt;RET&gt;  V M k r    180. v b 100 &lt;RET&gt;  V M k r  90 -
</pre>
   <p class="noindent">(The next step may be slow, depending on the speed of your computer.)

<pre class="smallexample">     2:  [0.52, 0.71, ..., 0.72]    1:  [0.72, 1.14, ..., 1.45]
     1:  [0.20, 0.43, ..., 0.73]        .
         .
     
         m d  V M C                     +
</pre>
   <p class="noindent">
<pre class="smallexample">     1:  [0, 1, ..., 1]       1:  0.64            1:  3.125
         .                        .                   .
     
         1 V M a &gt;                V R + 100 /         2 &lt;TAB&gt; /
</pre>
   <p>Let's try the third method, too.  We'll use random integers up to
one million.  The <kbd>k r</kbd> command with an integer argument picks
a random integer.

<pre class="smallexample">     2:  [1000000, 1000000, ..., 1000000]   2:  [78489, 527587, ..., 814975]
     1:  [1000000, 1000000, ..., 1000000]   1:  [324014, 358783, ..., 955450]
         .                                      .
     
         1000000 v b 100 &lt;RET&gt; &lt;RET&gt;                V M k r  &lt;TAB&gt;  V M k r
</pre>
   <p class="noindent">
<pre class="smallexample">     1:  [1, 1, ..., 25]      1:  [1, 1, ..., 0]     1:  0.56
         .                        .                      .
     
         V M k g                  1 V M a =              V R + 100 /
</pre>
   <p class="noindent">
<pre class="smallexample">     1:  10.714        1:  3.273
         .                 .
     
         6 &lt;TAB&gt; /           Q
</pre>
   <p>For a proof of this property of the GCD function, see section 4.5.2,
exercise 10, of Knuth's <em>Art of Computer Programming</em>, volume II.

   <p>If you typed <kbd>v .</kbd> and <kbd>t .</kbd> before, type them again to
return to full-sized display of vectors.

   </body></html>

