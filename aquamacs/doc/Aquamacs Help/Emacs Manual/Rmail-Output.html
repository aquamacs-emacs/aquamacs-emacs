<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Manual,
updated for Emacs version 25.1.

Copyright Â© 1985-1987, 1993-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GNU Emacs Manual: Rmail Output</title>

<meta name="description" content="GNU Emacs Manual: Rmail Output">
<meta name="keywords" content="GNU Emacs Manual: Rmail Output">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Key-Index.html#Key-Index" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Rmail.html#Rmail" rel="up" title="Rmail">
<link href="Rmail-Labels.html#Rmail-Labels" rel="next" title="Rmail Labels">
<link href="Rmail-Files.html#Rmail-Files" rel="prev" title="Rmail Files">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


<link rel="stylesheet" href="aquamacs.css" type="text/css" /></head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Rmail-Output"></a>
<div class="header">
<p>
Next: <a href="Rmail-Labels.html#Rmail-Labels" accesskey="n" rel="next">Rmail Labels</a>, Previous: <a href="Rmail-Files.html#Rmail-Files" accesskey="p" rel="prev">Rmail Files</a>, Up: <a href="Rmail.html#Rmail" accesskey="u" rel="up">Rmail</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Copying-Messages-Out-to-Files"></a>
<h3 class="section">33.7 Copying Messages Out to Files</h3>

<p>These commands copy messages from an Rmail file into another file.
</p>
<dl compact="compact">
<dt><kbd>o <var>file</var> <span class="key">RET</span></kbd></dt>
<dd><p>Append a full copy of the current message to the file <var>file</var>
(<code>rmail-output</code>).
</p>
</dd>
<dt><kbd>C-o <var>file</var> <span class="key">RET</span></kbd></dt>
<dd><p>Append a copy of the current message, as displayed, to the file
<var>file</var> (<code>rmail-output-as-seen</code>).
</p>
</dd>
<dt><kbd>w <var>file</var> <span class="key">RET</span></kbd></dt>
<dd><p>Output just the message body to the file <var>file</var>, taking the default
file name from the message &lsquo;<samp>Subject</samp>&rsquo; header.
</p></dd>
</dl>

<a name="index-o-_0028Rmail_0029"></a>
<a name="index-rmail_002doutput_002das_002dseen"></a>
<a name="index-C_002do-_0028Rmail_0029"></a>
<a name="index-rmail_002doutput"></a>
<p>The commands <kbd>o</kbd> and <kbd>C-o</kbd> copy the current message into a
specified file, adding it at the end.  The two commands differ mainly
in how much to copy: <kbd>o</kbd> copies the full message headers, even if
they are not all visible, while <kbd>C-o</kbd> copies exactly the headers
currently displayed and no more.  See <a href="Rmail-Display.html#Rmail-Display">Rmail Display</a>.  In addition,
<kbd>o</kbd> converts the message to Babyl format (used by Rmail in Emacs
version 22 and before) if the file is in Babyl format; <kbd>C-o</kbd>
cannot output to Babyl files at all.
</p>
<p>If the output file is currently visited in an Emacs buffer, the
output commands append the message to that buffer.  It is up to you to
save the buffer eventually in its file.
</p>
<a name="index-w-_0028Rmail_0029"></a>
<a name="index-rmail_002doutput_002dbody_002dto_002dfile"></a>
<p>Sometimes you may receive a message whose body holds the contents of a
file.  You can save the body to a file (excluding the message header)
with the <kbd>w</kbd> command (<code>rmail-output-body-to-file</code>).  Often
these messages contain the intended file name in the &lsquo;<samp>Subject</samp>&rsquo;
field, so the <kbd>w</kbd> command uses the &lsquo;<samp>Subject</samp>&rsquo; field as the
default for the output file name.  However, the file name is read using
the minibuffer, so you can specify a different name if you wish.
</p>
<p>You can also output a message to an Rmail file chosen with a menu.
In the Classify menu, choose the Output Rmail File menu item; then
choose the Rmail file you want.  This outputs the current message to
that file, like the <kbd>o</kbd> command.  The variables
<code>rmail-secondary-file-directory</code> and
<code>rmail-secondary-file-regexp</code> specify which files to offer in the
menu: the first variable says which directory to find them in; the
second says which files in that directory to offer (all those that
match the regular expression).  If no files match, you cannot select
this menu item.
</p>
<a name="index-rmail_002ddelete_002dafter_002doutput"></a>
<p>Copying a message with <kbd>o</kbd> or <kbd>C-o</kbd> gives the original copy
of the message the &lsquo;<samp>filed</samp>&rsquo; attribute, so that &lsquo;<samp>filed</samp>&rsquo;
appears in the mode line when such a message is current.
</p>
<p>If you like to keep just a single copy of every mail message, set
the variable <code>rmail-delete-after-output</code> to <code>t</code>; then the
<kbd>o</kbd>, <kbd>C-o</kbd> and <kbd>w</kbd> commands delete the original message
after copying it.  (You can undelete it afterward if you wish.)
</p>
<a name="index-rmail_002doutput_002dfile_002dalist"></a>
<p>The variable <code>rmail-output-file-alist</code> lets you specify
intelligent defaults for the output file, based on the contents of the
current message.  The value should be a list whose elements have this
form:
</p>
<div class="example">
<pre class="example">(<var>regexp</var> . <var>name-exp</var>)
</pre></div>

<p>If there&rsquo;s a match for <var>regexp</var> in the current message, then the
default file name for output is <var>name-exp</var>.  If multiple elements
match the message, the first matching element decides the default file
name.  The subexpression <var>name-exp</var> may be a string constant giving
the file name to use, or more generally it may be any Lisp expression
that returns a file name as a string.  <code>rmail-output-file-alist</code>
applies to both <kbd>o</kbd> and <kbd>C-o</kbd>.
</p>
<a name="index-rmail_002dautomatic_002dfolder_002ddirectives"></a>
<p>Rmail can automatically save messages from your primary Rmail file
(the one that <code>rmail-file-name</code> specifies) to other files, based
on the value of the variable <code>rmail-automatic-folder-directives</code>.
This variable is a list of elements (&lsquo;<samp>directives</samp>&rsquo;) that say which
messages to save where.  Each directive is a list consisting of an
output file, followed by one or more pairs of a header name and a regular
expression.  If a message has a header matching the specified regular
expression, that message is saved to the given file.  If the directive
has more than one header entry, all must match.  Rmail checks directives
when it shows a message from the file <code>rmail-file-name</code>, and
applies the first that matches (if any).  If the output file is
<code>nil</code>, the message is deleted, not saved.  For example, you can use
this feature to save messages from a particular address, or with a
particular subject, to a dedicated file.
</p>
<hr>
<div class="header">
<p>
Next: <a href="Rmail-Labels.html#Rmail-Labels" accesskey="n" rel="next">Rmail Labels</a>, Previous: <a href="Rmail-Files.html#Rmail-Files" accesskey="p" rel="prev">Rmail Files</a>, Up: <a href="Rmail.html#Rmail" accesskey="u" rel="up">Rmail</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
