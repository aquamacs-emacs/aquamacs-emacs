<html lang="en">
<head>
<title>Substitution of Expressions - Common Lisp Extensions</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Common Lisp Extensions">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Lists.html#Lists" title="Lists">
<link rel="prev" href="List-Functions.html#List-Functions" title="List Functions">
<link rel="next" href="Lists-as-Sets.html#Lists-as-Sets" title="Lists as Sets">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents the GNU Emacs Common Lisp emulation package.

Copyright (C) 1993, 2001, 2002, 2003, 2004, 2005, 2006, 2007,
2008, 2009, 2010  Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover texts
     being ``A GNU Manual'', and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Substitution-of-Expressions"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Lists-as-Sets.html#Lists-as-Sets">Lists as Sets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="List-Functions.html#List-Functions">List Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Lists.html#Lists">Lists</a>
<hr>
</div>

<h3 class="section">11.2 Substitution of Expressions</h3>

<p class="noindent">These functions substitute elements throughout a tree of cons
cells.  (See <a href="Sequence-Functions.html#Sequence-Functions">Sequence Functions</a>, for the <code>substitute</code>
function, which works on just the top-level elements of a list.)

<div class="defun">
&mdash; Function: <b>subst</b><var> new old tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-subst-151"></a></var><br>
<blockquote><p>This function substitutes occurrences of <var>old</var> with <var>new</var>
in <var>tree</var>, a tree of cons cells.  It returns a substituted
tree, which will be a copy except that it may share storage with
the argument <var>tree</var> in parts where no substitutions occurred. 
The original <var>tree</var> is not modified.  This function recurses
on, and compares against <var>old</var>, both <code>car</code>s and <code>cdr</code>s
of the component cons cells.  If <var>old</var> is itself a cons cell,
then matching cells in the tree are substituted as usual without
recursively substituting in that cell.  Comparisons with <var>old</var>
are done according to the specified test (<code>eql</code> by default). 
The <code>:key</code> function is applied to the elements of the tree
but not to <var>old</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>nsubst</b><var> new old tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-nsubst-152"></a></var><br>
<blockquote><p>This function is like <code>subst</code>, except that it works by
destructive modification (by <code>setcar</code> or <code>setcdr</code>)
rather than copying. 
</p></blockquote></div>

   <p><a name="index-subst_002dif-153"></a><a name="index-subst_002dif_002dnot-154"></a><a name="index-nsubst_002dif-155"></a><a name="index-nsubst_002dif_002dnot-156"></a>The <code>subst-if</code>, <code>subst-if-not</code>, <code>nsubst-if</code>, and
<code>nsubst-if-not</code> functions are defined similarly.

<div class="defun">
&mdash; Function: <b>sublis</b><var> alist tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-sublis-157"></a></var><br>
<blockquote><p>This function is like <code>subst</code>, except that it takes an
association list <var>alist</var> of <var>old</var>-<var>new</var> pairs. 
Each element of the tree (after applying the <code>:key</code>
function, if any), is compared with the <code>car</code>s of
<var>alist</var>; if it matches, it is replaced by the corresponding
<code>cdr</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>nsublis</b><var> alist tree </var><tt>&amp;key :test :test-not :key</tt><var><a name="index-nsublis-158"></a></var><br>
<blockquote><p>This is a destructive version of <code>sublis</code>. 
</p></blockquote></div>

   </body></html>

