<html lang="en">
<head>
<title>Minibuffer Completion - GNU Emacs Lisp Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Emacs Lisp Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Completion.html#Completion" title="Completion">
<link rel="prev" href="Basic-Completion.html#Basic-Completion" title="Basic Completion">
<link rel="next" href="Completion-Commands.html#Completion-Commands" title="Completion Commands">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This is edition 3.0 of the GNU Emacs Lisp Reference Manual,

corresponding to Emacs version 23.2.50.

Copyright (C) 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010  Free Software
Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``GNU General Public
     License,'' with the Front-Cover texts being ``A GNU Manual,'' and
     with the Back-Cover Texts as in (a) below.  A copy of the license
     is included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">

<link rel="stylesheet" href="aquamacs.css" type="text/css" /></head>
<body>
<div class="node">
<a name="Minibuffer-Completion"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Completion-Commands.html#Completion-Commands">Completion Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Basic-Completion.html#Basic-Completion">Basic Completion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Completion.html#Completion">Completion</a>
<hr>
</div>

<h4 class="subsection">20.6.2 Completion and the Minibuffer</h4>

<p><a name="index-minibuffer-completion-1122"></a><a name="index-reading-from-minibuffer-with-completion-1123"></a>
  This section describes the basic interface for reading from the
minibuffer with completion.

<div class="defun">
&mdash; Function: <b>completing-read</b><var> prompt collection &amp;optional predicate require-match initial hist default inherit-input-method<a name="index-completing_002dread-1124"></a></var><br>
<blockquote><p>This function reads a string in the minibuffer, assisting the user by
providing completion.  It activates the minibuffer with prompt
<var>prompt</var>, which must be a string.

        <p>The actual completion is done by passing <var>collection</var> and
<var>predicate</var> to the function <code>try-completion</code> (see <a href="Basic-Completion.html#Basic-Completion">Basic Completion</a>).  This happens in certain commands bound in the local
keymaps used for completion.  Some of these commands also call
<code>test-completion</code>.  Thus, if <var>predicate</var> is non-<code>nil</code>,
it should be compatible with <var>collection</var> and
<code>completion-ignore-case</code>.  See <a href="Definition-of-test_002dcompletion.html#Definition-of-test_002dcompletion">Definition of test-completion</a>.

        <p>The value of the optional argument <var>require-match</var> determines how
the user may exit the minibuffer:

          <ul>
<li>If <code>nil</code>, the usual minibuffer exit commands work regardless of
the input in the minibuffer.

          <li>If <code>t</code>, the usual minibuffer exit commands won't exit unless the
input completes to an element of <var>collection</var>.

          <li>If <code>confirm</code>, the user can exit with any input, but is asked for
confirmation if the input is not an element of <var>collection</var>.

          <li>If <code>confirm-after-completion</code>, the user can exit with any input,
but is asked for confirmation if the preceding command was a
completion command (i.e., one of the commands in
<code>minibuffer-confirm-exit-commands</code>) and the resulting input is
not an element of <var>collection</var>.  See <a href="Completion-Commands.html#Completion-Commands">Completion Commands</a>.

          <li>Any other value of <var>require-match</var> behaves like <code>t</code>, except
that the exit commands won't exit if it performs completion. 
</ul>

        <p>However, empty input is always permitted, regardless of the value of
<var>require-match</var>; in that case, <code>completing-read</code> returns the
first element of <var>default</var>, if it is a list; <code>""</code>, if
<var>default</var> is <code>nil</code>; or <var>default</var>.  The string or strings
in <var>default</var> are also available to the user through the history
commands.

        <p>The function <code>completing-read</code> uses
<code>minibuffer-local-completion-map</code> as the keymap if
<var>require-match</var> is <code>nil</code>, and uses
<code>minibuffer-local-must-match-map</code> if <var>require-match</var> is
non-<code>nil</code>.  See <a href="Completion-Commands.html#Completion-Commands">Completion Commands</a>.

        <p>The argument <var>hist</var> specifies which history list variable to use for
saving the input and for minibuffer history commands.  It defaults to
<code>minibuffer-history</code>.  See <a href="Minibuffer-History.html#Minibuffer-History">Minibuffer History</a>.

        <p>The argument <var>initial</var> is mostly deprecated; we recommend using a
non-<code>nil</code> value only in conjunction with specifying a cons cell
for <var>hist</var>.  See <a href="Initial-Input.html#Initial-Input">Initial Input</a>.  For default input, use
<var>default</var> instead.

        <p>If the argument <var>inherit-input-method</var> is non-<code>nil</code>, then the
minibuffer inherits the current input method (see <a href="Input-Methods.html#Input-Methods">Input Methods</a>) and the setting of <code>enable-multibyte-characters</code>
(see <a href="Text-Representations.html#Text-Representations">Text Representations</a>) from whichever buffer was current before
entering the minibuffer.

        <p>If the built-in variable <code>completion-ignore-case</code> is
non-<code>nil</code>, completion ignores case when comparing the input
against the possible matches.  See <a href="Basic-Completion.html#Basic-Completion">Basic Completion</a>.  In this mode
of operation, <var>predicate</var> must also ignore case, or you will get
surprising results.

        <p>Here's an example of using <code>completing-read</code>:

     <pre class="smallexample">          (completing-read
           "Complete a foo: "
           '(("foobar1" 1) ("barfoo" 2) ("foobaz" 3) ("foobar2" 4))
           nil t "fo")
          
          ;; <span class="roman">After evaluation of the preceding expression,</span>
          ;;   <span class="roman">the following appears in the minibuffer:</span>
          
          ---------- Buffer: Minibuffer ----------
          Complete a foo: fo-!-
          ---------- Buffer: Minibuffer ----------
</pre>
        <p class="noindent">If the user then types <kbd>&lt;DEL&gt; &lt;DEL&gt; b &lt;RET&gt;</kbd>,
<code>completing-read</code> returns <code>barfoo</code>.

        <p>The <code>completing-read</code> function binds variables to pass
information to the commands that actually do completion. 
They are described in the following section. 
</p></blockquote></div>

   </body></html>

