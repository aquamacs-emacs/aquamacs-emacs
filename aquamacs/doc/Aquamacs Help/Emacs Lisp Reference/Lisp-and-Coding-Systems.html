<html lang="en">
<head>
<title>Lisp and Coding Systems - GNU Emacs Lisp Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Emacs Lisp Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Coding-Systems.html#Coding-Systems" title="Coding Systems">
<link rel="prev" href="Encoding-and-I_002fO.html#Encoding-and-I_002fO" title="Encoding and I/O">
<link rel="next" href="User_002dChosen-Coding-Systems.html#User_002dChosen-Coding-Systems" title="User-Chosen Coding Systems">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This is edition 3.0 of the GNU Emacs Lisp Reference Manual,

corresponding to Emacs version 23.2.50.

Copyright (C) 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1998,
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010  Free Software
Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``GNU General Public
     License,'' with the Front-Cover texts being ``A GNU Manual,'' and
     with the Back-Cover Texts as in (a) below.  A copy of the license
     is included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">

<link rel="stylesheet" href="aquamacs.css" type="text/css" /></head>
<body>
<div class="node">
<a name="Lisp-and-Coding-Systems"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="User_002dChosen-Coding-Systems.html#User_002dChosen-Coding-Systems">User-Chosen Coding Systems</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Encoding-and-I_002fO.html#Encoding-and-I_002fO">Encoding and I/O</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Coding-Systems.html#Coding-Systems">Coding Systems</a>
<hr>
</div>

<h4 class="subsection">33.9.3 Coding Systems in Lisp</h4>

<p>Here are the Lisp facilities for working with coding systems:

   <p><a name="index-list-all-coding-systems-2854"></a>

<div class="defun">
&mdash; Function: <b>coding-system-list</b><var> &amp;optional base-only<a name="index-coding_002dsystem_002dlist-2855"></a></var><br>
<blockquote><p>This function returns a list of all coding system names (symbols).  If
<var>base-only</var> is non-<code>nil</code>, the value includes only the
base coding systems.  Otherwise, it includes alias and variant coding
systems as well. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>coding-system-p</b><var> object<a name="index-coding_002dsystem_002dp-2856"></a></var><br>
<blockquote><p>This function returns <code>t</code> if <var>object</var> is a coding system
name or <code>nil</code>. 
</p></blockquote></div>

   <p><a name="index-validity-of-coding-system-2857"></a><a name="index-coding-system_002c-validity-check-2858"></a>

<div class="defun">
&mdash; Function: <b>check-coding-system</b><var> coding-system<a name="index-check_002dcoding_002dsystem-2859"></a></var><br>
<blockquote><p>This function checks the validity of <var>coding-system</var>.  If that is
valid, it returns <var>coding-system</var>.  If <var>coding-system</var> is
<code>nil</code>, the function return <code>nil</code>.  For any other values, it
signals an error whose <code>error-symbol</code> is <code>coding-system-error</code>
(see <a href="Signaling-Errors.html#Signaling-Errors">signal</a>). 
</p></blockquote></div>

   <p><a name="index-eol-type-of-coding-system-2860"></a>

<div class="defun">
&mdash; Function: <b>coding-system-eol-type</b><var> coding-system<a name="index-coding_002dsystem_002deol_002dtype-2861"></a></var><br>
<blockquote><p>This function returns the type of end-of-line (a.k.a. <dfn>eol</dfn>)
conversion used by <var>coding-system</var>.  If <var>coding-system</var>
specifies a certain eol conversion, the return value is an integer 0,
1, or 2, standing for <code>unix</code>, <code>dos</code>, and <code>mac</code>,
respectively.  If <var>coding-system</var> doesn't specify eol conversion
explicitly, the return value is a vector of coding systems, each one
with one of the possible eol conversion types, like this:

     <pre class="lisp">          (coding-system-eol-type 'latin-1)
               &rArr; [latin-1-unix latin-1-dos latin-1-mac]
</pre>
        <p class="noindent">If this function returns a vector, Emacs will decide, as part of the
text encoding or decoding process, what eol conversion to use.  For
decoding, the end-of-line format of the text is auto-detected, and the
eol conversion is set to match it (e.g., DOS-style CRLF format will
imply <code>dos</code> eol conversion).  For encoding, the eol conversion is
taken from the appropriate default coding system (e.g.,
default value of <code>buffer-file-coding-system</code> for
<code>buffer-file-coding-system</code>), or from the default eol conversion
appropriate for the underlying platform. 
</p></blockquote></div>

   <p><a name="index-eol-conversion-of-coding-system-2862"></a>

<div class="defun">
&mdash; Function: <b>coding-system-change-eol-conversion</b><var> coding-system eol-type<a name="index-coding_002dsystem_002dchange_002deol_002dconversion-2863"></a></var><br>
<blockquote><p>This function returns a coding system which is like <var>coding-system</var>
except for its eol conversion, which is specified by <code>eol-type</code>. 
<var>eol-type</var> should be <code>unix</code>, <code>dos</code>, <code>mac</code>, or
<code>nil</code>.  If it is <code>nil</code>, the returned coding system determines
the end-of-line conversion from the data.

        <p><var>eol-type</var> may also be 0, 1 or 2, standing for <code>unix</code>,
<code>dos</code> and <code>mac</code>, respectively. 
</p></blockquote></div>

   <p><a name="index-text-conversion-of-coding-system-2864"></a>

<div class="defun">
&mdash; Function: <b>coding-system-change-text-conversion</b><var> eol-coding text-coding<a name="index-coding_002dsystem_002dchange_002dtext_002dconversion-2865"></a></var><br>
<blockquote><p>This function returns a coding system which uses the end-of-line
conversion of <var>eol-coding</var>, and the text conversion of
<var>text-coding</var>.  If <var>text-coding</var> is <code>nil</code>, it returns
<code>undecided</code>, or one of its variants according to <var>eol-coding</var>. 
</p></blockquote></div>

   <p><a name="index-safely-encode-region-2866"></a><a name="index-coding-systems-for-encoding-region-2867"></a>

<div class="defun">
&mdash; Function: <b>find-coding-systems-region</b><var> from to<a name="index-find_002dcoding_002dsystems_002dregion-2868"></a></var><br>
<blockquote><p>This function returns a list of coding systems that could be used to
encode a text between <var>from</var> and <var>to</var>.  All coding systems in
the list can safely encode any multibyte characters in that portion of
the text.

        <p>If the text contains no multibyte characters, the function returns the
list <code>(undecided)</code>. 
</p></blockquote></div>

   <p><a name="index-safely-encode-a-string-2869"></a><a name="index-coding-systems-for-encoding-a-string-2870"></a>

<div class="defun">
&mdash; Function: <b>find-coding-systems-string</b><var> string<a name="index-find_002dcoding_002dsystems_002dstring-2871"></a></var><br>
<blockquote><p>This function returns a list of coding systems that could be used to
encode the text of <var>string</var>.  All coding systems in the list can
safely encode any multibyte characters in <var>string</var>.  If the text
contains no multibyte characters, this returns the list
<code>(undecided)</code>. 
</p></blockquote></div>

   <p><a name="index-charset_002c-coding-systems-to-encode-2872"></a><a name="index-safely-encode-characters-in-a-charset-2873"></a>

<div class="defun">
&mdash; Function: <b>find-coding-systems-for-charsets</b><var> charsets<a name="index-find_002dcoding_002dsystems_002dfor_002dcharsets-2874"></a></var><br>
<blockquote><p>This function returns a list of coding systems that could be used to
encode all the character sets in the list <var>charsets</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>check-coding-systems-region</b><var> start end coding-system-list<a name="index-check_002dcoding_002dsystems_002dregion-2875"></a></var><br>
<blockquote><p>This function checks whether coding systems in the list
<code>coding-system-list</code> can encode all the characters in the region
between <var>start</var> and <var>end</var>.  If all of the coding systems in
the list can encode the specified text, the function returns
<code>nil</code>.  If some coding systems cannot encode some of the
characters, the value is an alist, each element of which has the form
<code>(</code><var>coding-system1</var> <var>pos1</var> <var>pos2</var><code> ...)</code>, meaning
that <var>coding-system1</var> cannot encode characters at buffer positions
<var>pos1</var>, <var>pos2</var>, <small class="enddots">...</small>.

        <p><var>start</var> may be a string, in which case <var>end</var> is ignored and
the returned value references string indices instead of buffer
positions. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>detect-coding-region</b><var> start end &amp;optional highest<a name="index-detect_002dcoding_002dregion-2876"></a></var><br>
<blockquote><p>This function chooses a plausible coding system for decoding the text
from <var>start</var> to <var>end</var>.  This text should be a byte sequence,
i.e. unibyte text or multibyte text with only <acronym>ASCII</acronym> and
eight-bit characters (see <a href="Explicit-Encoding.html#Explicit-Encoding">Explicit Encoding</a>).

        <p>Normally this function returns a list of coding systems that could
handle decoding the text that was scanned.  They are listed in order of
decreasing priority.  But if <var>highest</var> is non-<code>nil</code>, then the
return value is just one coding system, the one that is highest in
priority.

        <p>If the region contains only <acronym>ASCII</acronym> characters except for such
ISO-2022 control characters ISO-2022 as <code>ESC</code>, the value is
<code>undecided</code> or <code>(undecided)</code>, or a variant specifying
end-of-line conversion, if that can be deduced from the text.

        <p>If the region contains null bytes, the value is <code>no-conversion</code>,
even if the region contains text encoded in some coding system. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>detect-coding-string</b><var> string &amp;optional highest<a name="index-detect_002dcoding_002dstring-2877"></a></var><br>
<blockquote><p>This function is like <code>detect-coding-region</code> except that it
operates on the contents of <var>string</var> instead of bytes in the buffer. 
</p></blockquote></div>

   <p><a name="index-null-bytes_002c-and-decoding-text-2878"></a>

<div class="defun">
&mdash; Variable: <b>inhibit-null-byte-detection</b><var><a name="index-inhibit_002dnull_002dbyte_002ddetection-2879"></a></var><br>
<blockquote><p>If this variable has a non-<code>nil</code> value, null bytes are ignored
when detecting the encoding of a region or a string.  This allows to
correctly detect the encoding of text that contains null bytes, such
as Info files with General_General_General_General_General_General_General_General_General_Index nodes. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>inhibit-iso-escape-detection</b><var><a name="index-inhibit_002diso_002descape_002ddetection-2880"></a></var><br>
<blockquote><p>If this variable has a non-<code>nil</code> value, ISO-2022 escape sequences
are ignored when detecting the encoding of a region or a string.  The
result is that no text is ever detected as encoded in some ISO-2022
encoding, and all escape sequences become visible in a buffer. 
<strong>Warning:</strong> <em>Use this variable with extreme caution,
because many files in the Emacs distribution use ISO-2022 encoding.</em>
</p></blockquote></div>

   <p><a name="index-charsets-supported-by-a-coding-system-2881"></a>

<div class="defun">
&mdash; Function: <b>coding-system-charset-list</b><var> coding-system<a name="index-coding_002dsystem_002dcharset_002dlist-2882"></a></var><br>
<blockquote><p>This function returns the list of character sets (see <a href="Character-Sets.html#Character-Sets">Character Sets</a>) supported by <var>coding-system</var>.  Some coding systems that
support too many character sets to list them all yield special values:
          <ul>
<li>If <var>coding-system</var> supports all the ISO-2022 charsets, the value
is <code>iso-2022</code>. 
<li>If <var>coding-system</var> supports all Emacs characters, the value is
<code>(emacs)</code>. 
<li>If <var>coding-system</var> supports all emacs-mule characters, the value
is <code>emacs-mule</code>. 
<li>If <var>coding-system</var> supports all Unicode characters, the value is
<code>(unicode)</code>. 
</ul>
        </p></blockquote></div>

   <p>See <a href="Coding-systems-for-a-subprocess.html#Coding-systems-for-a-subprocess">Process Information</a>, in
particular the description of the functions
<code>process-coding-system</code> and <code>set-process-coding-system</code>, for
how to examine or set the coding systems used for I/O to a subprocess.

   </body></html>

