<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 25.1.

Copyright Â© 1985-1987, 1993-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.18.1), see www.w3.org" />

  <title>GNU Emacs Manual: Keyboard Macro Query</title>
  <meta name="description" content=
  "GNU Emacs Manual: Keyboard Macro Query" />
  <meta name="keywords" content=
  "GNU Emacs Manual: Keyboard Macro Query" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Keyboard-Macros.html#Keyboard-Macros" rel="up" title=
  "Keyboard Macros" />
  <link href="Save-Keyboard-Macro.html#Save-Keyboard-Macro" rel=
  "next" title="Save Keyboard Macro" />
  <link href="Keyboard-Macro-Counter.html#Keyboard-Macro-Counter"
  rel="prev" title="Keyboard Macro Counter" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <link rel="stylesheet" href="aquamacs.css" type="text/css" />
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Keyboard-Macro-Query" id="Keyboard-Macro-Query"></a>

  <div class="header">
    <p>Next: <a href="Save-Keyboard-Macro.html#Save-Keyboard-Macro"
    accesskey="n" rel="next">Save Keyboard Macro</a>, Previous:
    <a href="Keyboard-Macro-Counter.html#Keyboard-Macro-Counter"
    accesskey="p" rel="prev">Keyboard Macro Counter</a>, Up:
    <a href="Keyboard-Macros.html#Keyboard-Macros" accesskey="u"
    rel="up">Keyboard Macros</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Executing-Macros-with-Variations" id=
  "Executing-Macros-with-Variations"></a>

  <h3 class="section">17.4 Executing Macros with Variations</h3>

  <p>In a keyboard macro, you can create an effect similar to that
  of <code>query-replace</code>, in that the macro asks you each
  time around whether to make a change.</p>

  <dl compact="compact">
    <dt><kbd>C-x q</kbd></dt>

    <dd>
      <p>When this point is reached during macro execution, ask for
      confirmation (<code>kbd-macro-query</code>).</p>
    </dd>
  </dl><a name="index-C_002dx-q" id="index-C_002dx-q"></a> <a name=
  "index-kbd_002dmacro_002dquery" id=
  "index-kbd_002dmacro_002dquery"></a>

  <p>While defining the macro, type <kbd>C-x q</kbd> at the point
  where you want the query to occur. During macro definition, the
  <kbd>C-x q</kbd> does nothing, but when you run the macro later,
  <kbd>C-x q</kbd> asks you interactively whether to continue.</p>

  <p>The valid responses when <kbd>C-x q</kbd> asks are:</p>

  <dl compact="compact">
    <dt><tt class="key">SPC</tt> (or <kbd>y</kbd>)</dt>

    <dd>
      <p>Continue executing the keyboard macro.</p>
    </dd>

    <dt><tt class="key">DEL</tt> (or <kbd>n</kbd>)</dt>

    <dd>
      <p>Skip the remainder of this repetition of the macro, and
      start right away with the next repetition.</p>
    </dd>

    <dt><tt class="key">RET</tt> (or <kbd>q</kbd>)</dt>

    <dd>
      <p>Skip the remainder of this repetition and cancel further
      repetitions.</p>
    </dd>

    <dt><kbd>C-r</kbd></dt>

    <dd>
      <p>Enter a recursive editing level, in which you can perform
      editing which is not part of the macro. When you exit the
      recursive edit using <kbd>C-M-c</kbd>, you are asked again
      how to continue with the keyboard macro. If you type a
      <tt class="key">SPC</tt> at this time, the rest of the macro
      definition is executed. It is up to you to leave point and
      the text in a state such that the rest of the macro will do
      what you want.</p>
    </dd>
  </dl>

  <p><kbd>C-u C-x q</kbd>, which is <kbd>C-x q</kbd> with a numeric
  argument, performs a completely different function. It enters a
  recursive edit reading input from the keyboard, both when you
  type it during the definition of the macro, and when it is
  executed from the macro. During definition, the editing you do
  inside the recursive edit does not become part of the macro.
  During macro execution, the recursive edit gives you a chance to
  do some particularized editing on each repetition. See <a href=
  "Recursive-Edit.html#Recursive-Edit">Recursive Edit</a>.</p>
  <hr />

  <div class="header">
    <p>Next: <a href="Save-Keyboard-Macro.html#Save-Keyboard-Macro"
    accesskey="n" rel="next">Save Keyboard Macro</a>, Previous:
    <a href="Keyboard-Macro-Counter.html#Keyboard-Macro-Counter"
    accesskey="p" rel="prev">Keyboard Macro Counter</a>, Up:
    <a href="Keyboard-Macros.html#Keyboard-Macros" accesskey="u"
    rel="up">Keyboard Macros</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
