<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 25.1.

Copyright Â© 1985-1987, 1993-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.18.1), see www.w3.org" />

  <title>GNU Emacs Manual: Save Keyboard Macro</title>
  <meta name="description" content=
  "GNU Emacs Manual: Save Keyboard Macro" />
  <meta name="keywords" content=
  "GNU Emacs Manual: Save Keyboard Macro" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Keyboard-Macros.html#Keyboard-Macros" rel="up" title=
  "Keyboard Macros" />
  <link href="Edit-Keyboard-Macro.html#Edit-Keyboard-Macro" rel=
  "next" title="Edit Keyboard Macro" />
  <link href="Keyboard-Macro-Query.html#Keyboard-Macro-Query" rel=
  "prev" title="Keyboard Macro Query" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <link rel="stylesheet" href="aquamacs.css" type="text/css" />
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Save-Keyboard-Macro" id="Save-Keyboard-Macro"></a>

  <div class="header">
    <p>Next: <a href="Edit-Keyboard-Macro.html#Edit-Keyboard-Macro"
    accesskey="n" rel="next">Edit Keyboard Macro</a>, Previous:
    <a href="Keyboard-Macro-Query.html#Keyboard-Macro-Query"
    accesskey="p" rel="prev">Keyboard Macro Query</a>, Up: <a href=
    "Keyboard-Macros.html#Keyboard-Macros" accesskey="u" rel=
    "up">Keyboard Macros</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Naming-and-Saving-Keyboard-Macros" id=
  "Naming-and-Saving-Keyboard-Macros"></a>

  <h3 class="section">17.5 Naming and Saving Keyboard Macros</h3>

  <dl compact="compact">
    <dt><kbd>C-x C-k n</kbd></dt>

    <dd>
      <p>Give a command name (for the duration of the Emacs
      session) to the most recently defined keyboard macro
      (<code>kmacro-name-last-macro</code>).</p>
    </dd>

    <dt><kbd>C-x C-k b</kbd></dt>

    <dd>
      <p>Bind the most recently defined keyboard macro to a key
      sequence (for the duration of the session)
      (<code>kmacro-bind-to-key</code>).</p>
    </dd>

    <dt><kbd>M-x insert-kbd-macro</kbd></dt>

    <dd>
      <p>Insert in the buffer a keyboard macro&rsquo;s definition,
      as Lisp code.</p>
    </dd>
  </dl><a name="index-saving-keyboard-macros" id=
  "index-saving-keyboard-macros"></a> <a name=
  "index-kmacro_002dname_002dlast_002dmacro" id=
  "index-kmacro_002dname_002dlast_002dmacro"></a> <a name=
  "index-C_002dx-C_002dk-n" id="index-C_002dx-C_002dk-n"></a>

  <p>If you wish to save a keyboard macro for later use, you can
  give it a name using <kbd>C-x C-k n</kbd>
  (<code>kmacro-name-last-macro</code>). This reads a name as an
  argument using the minibuffer and defines that name to execute
  the last keyboard macro, in its current form. (If you later add
  to the definition of this macro, that does not alter the
  name&rsquo;s definition as a macro.) The macro name is a Lisp
  symbol, and defining it in this way makes it a valid command name
  for calling with <kbd>M-x</kbd> or for binding a key to with
  <code>global-set-key</code> (see <a href=
  "Keymaps.html#Keymaps">Keymaps</a>). If you specify a name that
  has a prior definition other than a keyboard macro, an error
  message is shown and nothing is changed.</p><a name=
  "index-binding-keyboard-macros" id=
  "index-binding-keyboard-macros"></a> <a name=
  "index-kmacro_002dbind_002dto_002dkey" id=
  "index-kmacro_002dbind_002dto_002dkey"></a> <a name=
  "index-C_002dx-C_002dk-b" id="index-C_002dx-C_002dk-b"></a>

  <p>You can also bind the last keyboard macro (in its current
  form) to a key, using <kbd>C-x C-k b</kbd>
  (<code>kmacro-bind-to-key</code>) followed by the key sequence
  you want to bind. You can bind to any key sequence in the global
  keymap, but since most key sequences already have other bindings,
  you should select the key sequence carefully. If you try to bind
  to a key sequence with an existing binding (in any keymap), this
  command asks you for confirmation before replacing the existing
  binding.</p>

  <p>To avoid problems caused by overriding existing bindings, the
  key sequences <kbd>C-x C-k 0</kbd> through <kbd>C-x C-k 9</kbd>
  and <kbd>C-x C-k A</kbd> through <kbd>C-x C-k Z</kbd> are
  reserved for your own keyboard macro bindings. In fact, to bind
  to one of these key sequences, you only need to type the digit or
  letter rather than the whole key sequences. For example,</p>

  <div class="example">
    <pre class="example">
C-x C-k b 4
</pre>
  </div>

  <p>will bind the last keyboard macro to the key sequence <kbd>C-x
  C-k 4</kbd>.</p><a name="index-insert_002dkbd_002dmacro" id=
  "index-insert_002dkbd_002dmacro"></a>

  <p>Once a macro has a command name, you can save its definition
  in a file. Then it can be used in another editing session. First,
  visit the file you want to save the definition in. Then use this
  command:</p>

  <div class="example">
    <pre class="example">
M-x insert-kbd-macro <span class=
"key">RET</span> <var>macroname</var> <span class="key">RET</span>
</pre>
  </div>

  <p>This inserts some Lisp code that, when executed later, will
  define the same macro with the same definition it has now. (You
  need not understand Lisp code to do this, because
  <code>insert-kbd-macro</code> writes the Lisp code for you.) Then
  save the file. You can load the file later with
  <code>load-file</code> (see <a href=
  "Lisp-Libraries.html#Lisp-Libraries">Lisp Libraries</a>). If the
  file you save in is your init file <samp>~/.emacs</samp> (see
  <a href="Init-File.html#Init-File">Init File</a>) then the macro
  will be defined each time you run Emacs.</p>

  <p>If you give <code>insert-kbd-macro</code> a numeric argument,
  it makes additional Lisp code to record the keys (if any) that
  you have bound to <var>macroname</var>, so that the macro will be
  reassigned the same keys when you load the file.</p>
  <hr />

  <div class="header">
    <p>Next: <a href="Edit-Keyboard-Macro.html#Edit-Keyboard-Macro"
    accesskey="n" rel="next">Edit Keyboard Macro</a>, Previous:
    <a href="Keyboard-Macro-Query.html#Keyboard-Macro-Query"
    accesskey="p" rel="prev">Keyboard Macro Query</a>, Up: <a href=
    "Keyboard-Macros.html#Keyboard-Macros" accesskey="u" rel=
    "up">Keyboard Macros</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
