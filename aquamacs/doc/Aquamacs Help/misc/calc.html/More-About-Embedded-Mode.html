<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.18.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: More About Embedded Mode</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: More About Embedded Mode" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: More About Embedded Mode" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Embedded-Mode.html#Embedded-Mode" rel="up" title=
  "Embedded Mode" />
  <link href=
  "Assignments-in-Embedded-Mode.html#Assignments-in-Embedded-Mode"
  rel="next" title="Assignments in Embedded Mode" />
  <link href="Basic-Embedded-Mode.html#Basic-Embedded-Mode" rel=
  "prev" title="Basic Embedded Mode" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="More-About-Embedded-Mode" id=
  "More-About-Embedded-Mode"></a>

  <div class="header">
    <p>Next: <a href=
    "Assignments-in-Embedded-Mode.html#Assignments-in-Embedded-Mode"
    accesskey="n" rel="next">Assignments in Embedded Mode</a>,
    Previous: <a href=
    "Basic-Embedded-Mode.html#Basic-Embedded-Mode" accesskey="p"
    rel="prev">Basic Embedded Mode</a>, Up: <a href=
    "Embedded-Mode.html#Embedded-Mode" accesskey="u" rel=
    "up">Embedded Mode</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="More-About-Embedded-Mode-1" id=
  "More-About-Embedded-Mode-1"></a>

  <h3 class="section">16.2 More About Embedded Mode</h3>

  <p>When Embedded mode &ldquo;activates&rdquo; a formula, i.e.,
  when it examines the formula for the first time since the buffer
  was created or loaded, Calc tries to sense the language in which
  the formula was written. If the formula contains any LaTeX-like
  &lsquo;<samp>\</samp>&rsquo; sequences, it is parsed (i.e., read)
  in LaTeX mode. If the formula appears to be written in multi-line
  Big mode, it is parsed in Big mode. Otherwise, it is parsed
  according to the current language mode.</p>

  <p>Note that Calc does not change the current language mode
  according the formula it reads in. Even though it can read a
  LaTeX formula when not in LaTeX mode, it will immediately rewrite
  this formula using whatever language mode is in
  effect.</p><a name="index-d-p" id="index-d-p"></a> <a name=
  "index-calc_002dshow_002dplain" id=
  "index-calc_002dshow_002dplain"></a>

  <p>Calc&rsquo;s parser is unable to read certain kinds of
  formulas. For example, with <kbd>v ]</kbd>
  (<code>calc-matrix-brackets</code>) you can specify matrix
  display styles which the parser is unable to recognize as
  matrices. The <kbd>d p</kbd> (<code>calc-show-plain</code>)
  command turns on a mode in which a &ldquo;plain&rdquo; version of
  a formula is placed in front of the fully-formatted version. When
  Calc reads a formula that has such a plain version in front, it
  reads the plain version and ignores the formatted version.</p>

  <p>Plain formulas are preceded and followed by
  &lsquo;<samp>%%%</samp>&rsquo; signs by default. This notation
  has the advantage that the &lsquo;<samp>%</samp>&rsquo; character
  begins a comment in TeX and LaTeX, so if your formula is embedded
  in a TeX or LaTeX document its plain version will be invisible in
  the final printed copy. Certain major modes have different
  delimiters to ensure that the &ldquo;plain&rdquo; version will be
  in a comment for those modes, also. See <a href=
  "Customizing-Embedded-Mode.html#Customizing-Embedded-Mode">Customizing
  Embedded Mode</a> to see how to change the &ldquo;plain&rdquo;
  formula delimiters.</p>

  <p>There are several notations which Calc&rsquo;s parser for
  &ldquo;big&rdquo; formatted formulas can&rsquo;t yet recognize.
  In particular, it can&rsquo;t read the large symbols for
  <code>sum</code>, <code>prod</code>, and <code>integ</code>, and
  it can&rsquo;t handle &lsquo;<samp>=&gt;</samp>&rsquo; with the
  righthand argument omitted. Also, Calc won&rsquo;t recognize
  special formats you have defined with the <kbd>Z C</kbd> command
  (see <a href=
  "User_002dDefined-Compositions.html#User_002dDefined-Compositions">
  User-Defined Compositions</a>). In these cases it is important to
  use &ldquo;plain&rdquo; mode to make sure Calc will be able to
  read your formula later.</p>

  <p>Another example where &ldquo;plain&rdquo; mode is important is
  if you have specified a float mode with few digits of precision.
  Normally any digits that are computed but not displayed will
  simply be lost when you save and re-load your embedded buffer,
  but &ldquo;plain&rdquo; mode allows you to make sure that the
  complete number is present in the file as well as the
  rounded-down number.</p>

  <p>Embedded buffers remember active formulas for as long as they
  exist in Emacs memory. Suppose you have an embedded formula which
  is &lsquo;<samp>pi</samp>&rsquo; to the normal 12 decimal places,
  and then type <kbd><span class=
  "nolinebreak">C-u</span>&nbsp;5&nbsp;d&nbsp;n</kbd><!-- /@w -->
  to display only five decimal places. If you then type <kbd>d
  n</kbd>, all 12 places reappear because the full number is still
  there on the Calc stack. More surprisingly, even if you exit
  Embedded mode and later re-enter it for that formula, typing
  <kbd>d n</kbd> will restore all 12 places because each buffer
  remembers all its active formulas. However, if you save the
  buffer in a file and reload it in a new Emacs session, all
  non-displayed digits will have been lost unless you used
  &ldquo;plain&rdquo; mode.</p>

  <p>In some applications of Embedded mode, you will want to have a
  sequence of copies of a formula that show its evolution as you
  work on it. For example, you might want to have a sequence like
  this in your file (elaborating here on the example from the
  &ldquo;Getting Started&rdquo; chapter):</p>

  <div class="smallexample">
    <pre class="smallexample">
The derivative of

                              ln(ln(x))

is

                  <span class=
"roman">(the derivative of </span>ln(ln(x))<span class=
"roman">)</span>

whose value at x = 2 is

                            <span class="roman">(the value)</span>

and at x = 3 is

                            <span class="roman">(the value)</span>
</pre>
  </div><a name="index-C_002dx-_002a-d" id=
  "index-C_002dx-_002a-d"></a> <a name=
  "index-calc_002dembedded_002dduplicate" id=
  "index-calc_002dembedded_002dduplicate"></a>

  <p>The <kbd>C-x * d</kbd> (<code>calc-embedded-duplicate</code>)
  command is a handy way to make sequences like this. If you type
  <kbd>C-x * d</kbd>, the formula under the cursor (which may or
  may not have Embedded mode enabled for it at the time) is copied
  immediately below and Embedded mode is then enabled for that
  copy.</p>

  <p>For this example, you would start with just</p>

  <div class="smallexample">
    <pre class="smallexample">
The derivative of

                              ln(ln(x))
</pre>
  </div>

  <p>and press <kbd>C-x * d</kbd> with the cursor on this formula.
  The result is</p>

  <div class="smallexample">
    <pre class="smallexample">
The derivative of

                              ln(ln(x))


                              ln(ln(x))
</pre>
  </div>

  <p>with the second copy of the formula enabled in Embedded mode.
  You can now press <kbd>a d x <span class="key">RET</span></kbd>
  to take the derivative, and <kbd>C-x * d C-x * d</kbd> to make
  two more copies of the derivative. To complete the computations,
  type <kbd>3 s l x <span class="key">RET</span></kbd> to evaluate
  the last formula, then move up to the second-to-last formula and
  type <kbd>2 s l x <span class="key">RET</span></kbd>.</p>

  <p>Finally, you would want to press <kbd>C-x * e</kbd> to exit
  Embedded mode, then go up and insert the necessary text in
  between the various formulas and numbers.</p><a name=
  "index-C_002dx-_002a-f" id="index-C_002dx-_002a-f"></a> <a name=
  "index-C_002dx-_002a-_0027" id="index-C_002dx-_002a-_0027"></a>
  <a name="index-calc_002dembedded_002dnew_002dformula" id=
  "index-calc_002dembedded_002dnew_002dformula"></a>

  <p>The <kbd>C-x * f</kbd>
  (<code>calc-embedded-new-formula</code>) command creates a new
  embedded formula at the current point. It inserts some default
  delimiters, which are usually just blank lines, and then does an
  algebraic entry to get the formula (which is then enabled for
  Embedded mode). This is just shorthand for typing the delimiters
  yourself, positioning the cursor between the new delimiters, and
  pressing <kbd>C-x * e</kbd>. The key sequence <kbd>C-x * '</kbd>
  is equivalent to <kbd>C-x * f</kbd>.</p><a name=
  "index-C_002dx-_002a-n" id="index-C_002dx-_002a-n"></a> <a name=
  "index-C_002dx-_002a-p" id="index-C_002dx-_002a-p"></a> <a name=
  "index-calc_002dembedded_002dnext" id=
  "index-calc_002dembedded_002dnext"></a> <a name=
  "index-calc_002dembedded_002dprevious" id=
  "index-calc_002dembedded_002dprevious"></a>

  <p>The <kbd>C-x * n</kbd> (<code>calc-embedded-next</code>) and
  <kbd>C-x * p</kbd> (<code>calc-embedded-previous</code>) commands
  move the cursor to the next or previous active embedded formula
  in the buffer. They can take positive or negative prefix
  arguments to move by several formulas. Note that these commands
  do not actually examine the text of the buffer looking for
  formulas; they only see formulas which have previously been
  activated in Embedded mode. In fact, <kbd>C-x * n</kbd> and
  <kbd>C-x * p</kbd> are a useful way to tell which embedded
  formulas are currently active. Also, note that these commands do
  not enable Embedded mode on the next or previous formula, they
  just move the cursor.</p><a name="index-C_002dx-_002a-_0060" id=
  "index-C_002dx-_002a-_0060"></a> <a name=
  "index-calc_002dembedded_002dedit" id=
  "index-calc_002dembedded_002dedit"></a>

  <p>The <kbd>C-x * `</kbd> (<code>calc-embedded-edit</code>)
  command edits the embedded formula at the current point as if by
  <kbd>`</kbd> (<code>calc-edit</code>). Embedded mode does not
  have to be enabled for this to work. Press <kbd>C-c C-c</kbd> to
  finish the edit, or <kbd>C-x k</kbd> to cancel.</p>
  <hr />

  <div class="header">
    <p>Next: <a href=
    "Assignments-in-Embedded-Mode.html#Assignments-in-Embedded-Mode"
    accesskey="n" rel="next">Assignments in Embedded Mode</a>,
    Previous: <a href=
    "Basic-Embedded-Mode.html#Basic-Embedded-Mode" accesskey="p"
    rel="prev">Basic Embedded Mode</a>, Up: <a href=
    "Embedded-Mode.html#Embedded-Mode" accesskey="u" rel=
    "up">Embedded Mode</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
