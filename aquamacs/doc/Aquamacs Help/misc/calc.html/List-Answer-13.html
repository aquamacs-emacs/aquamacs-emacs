<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.18.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: List Answer 13</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: List Answer 13" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: List Answer 13" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Answers-to-Exercises.html#Answers-to-Exercises" rel=
  "up" title="Answers to Exercises" />
  <link href="List-Answer-14.html#List-Answer-14" rel="next" title=
  "List Answer 14" />
  <link href="List-Answer-12.html#List-Answer-12" rel="prev" title=
  "List Answer 12" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="List-Answer-13" id="List-Answer-13"></a>

  <div class="header">
    <p>Next: <a href="List-Answer-14.html#List-Answer-14"
    accesskey="n" rel="next">List Answer 14</a>, Previous: <a href=
    "List-Answer-12.html#List-Answer-12" accesskey="p" rel=
    "prev">List Answer 12</a>, Up: <a href=
    "Answers-to-Exercises.html#Answers-to-Exercises" accesskey="u"
    rel="up">Answers to Exercises</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="List-Tutorial-Exercise-13" id=
  "List-Tutorial-Exercise-13"></a>

  <h4 class="subsection">2.7.31 List Tutorial Exercise 13</h4>

  <p>First, we put the string on the stack as a vector of ASCII
  codes.</p>

  <div class="smallexample">
    <pre class="smallexample">
1:  [84, 101, 115, ..., 51]
    .

    "Testing, 1, 2, 3 <span class="key">RET</span>
</pre>
  </div>

  <p>Note that the <kbd>"</kbd> key, like <kbd>$</kbd>, initiates
  algebraic entry so there was no need to type an apostrophe. Also,
  Calc didn&rsquo;t mind that we omitted the closing <kbd>"</kbd>.
  (The same goes for all closing delimiters like <kbd>)</kbd> and
  <kbd>]</kbd> at the end of a formula.</p>

  <p>We&rsquo;ll show two different approaches here. In the first,
  we note that if the input vector is &lsquo;<samp>[a, b, c,
  d]</samp>&rsquo;, then the hash code is &lsquo;<samp>3 (3 (3a +
  b) + c) + d = 27a + 9b + 3c + d</samp>&rsquo;. In other words,
  it&rsquo;s a sum of descending powers of three times the ASCII
  codes.</p>

  <div class="smallexample">
    <pre class="smallexample">
2:  [84, 101, 115, ..., 51]    2:  [84, 101, 115, ..., 51]
1:  16                         1:  [15, 14, 13, ..., 0]
    .                              .

    <span class=
"key">RET</span> v l                        v x 16 <span class=
"key">RET</span> -

</pre>
  </div>

  <div class="smallexample">
    <pre class="smallexample">
2:  [84, 101, 115, ..., 51]    1:  1960915098    1:  121
1:  [14348907, ..., 1]             .                 .
    .

    3 <span class=
"key">TAB</span> V M ^                    *                 511 %
</pre>
  </div>

  <p>Once again, <kbd>*</kbd> elegantly summarizes most of the
  computation. But there&rsquo;s an even more elegant approach:
  Reduce the formula <kbd>3 $$ + $</kbd> across the vector. Recall
  that this represents a function of two arguments that computes
  its first argument times three plus its second argument.</p>

  <div class="smallexample">
    <pre class="smallexample">
1:  [84, 101, 115, ..., 51]    1:  1960915098
    .                              .

    "Testing, 1, 2, 3 <span class=
"key">RET</span>          V R ' 3$$+$ <span class="key">RET</span>
</pre>
  </div>

  <p>If you did the decimal arithmetic exercise, this will be
  familiar. Basically, we&rsquo;re turning a base-3 vector of
  digits into an integer, except that our &ldquo;digits&rdquo; are
  much larger than real digits.</p>

  <p>Instead of typing <kbd>511 %</kbd> again to reduce the result,
  we can be cleverer still and notice that rather than computing a
  huge integer and taking the modulo at the end, we can take the
  modulo at each step without affecting the result. While this
  means there are more arithmetic operations, the numbers we
  operate on remain small so the operations are faster.</p>

  <div class="smallexample">
    <pre class="smallexample">
1:  [84, 101, 115, ..., 51]    1:  121
    .                              .

    "Testing, 1, 2, 3 <span class=
"key">RET</span>          V R ' (3$$+$)%511 <span class=
"key">RET</span>
</pre>
  </div>

  <p>Why does this work? Think about a two-step computation:
  &lsquo;<samp>3&nbsp;(3a&nbsp;+&nbsp;b)&nbsp;+&nbsp;c</samp>&rsquo;<!-- /@w -->.
  Taking a result modulo 511 basically means subtracting off enough
  511&rsquo;s to put the result in the desired range. So the result
  when we take the modulo after every step is,</p>

  <div class="example">
    <pre class="example">
3 (3 a + b - 511 m) + c - 511 n
</pre>
  </div>

  <p>for some suitable integers &lsquo;<samp>m</samp>&rsquo; and
  &lsquo;<samp>n</samp>&rsquo;. Expanding out by the distributive
  law yields</p>

  <div class="example">
    <pre class="example">
9 a + 3 b + c - 511*3 m - 511 n
</pre>
  </div>

  <p>The &lsquo;<samp>m</samp>&rsquo; term in the latter formula is
  redundant because any contribution it makes could just as easily
  be made by the &lsquo;<samp>n</samp>&rsquo; term. So we can take
  it out to get an equivalent formula with &lsquo;<samp>n' = 3m +
  n</samp>&rsquo;,</p>

  <div class="example">
    <pre class="example">
9 a + 3 b + c - 511 n'
</pre>
  </div>

  <p>which is just the formula for taking the modulo only at the
  end of the calculation. Therefore the two methods are essentially
  the same.</p>

  <p>Later in the tutorial we will encounter <em>modulo forms</em>,
  which basically automate the idea of reducing every intermediate
  result modulo some value <var>m</var>.</p>
  <hr />

  <div class="header">
    <p>Next: <a href="List-Answer-14.html#List-Answer-14"
    accesskey="n" rel="next">List Answer 14</a>, Previous: <a href=
    "List-Answer-12.html#List-Answer-12" accesskey="p" rel=
    "prev">List Answer 12</a>, Up: <a href=
    "Answers-to-Exercises.html#Answers-to-Exercises" accesskey="u"
    rel="up">Answers to Exercises</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
