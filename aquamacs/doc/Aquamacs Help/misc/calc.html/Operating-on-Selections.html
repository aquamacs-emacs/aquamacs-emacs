<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.18.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Operating on Selections</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Operating on Selections" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: Operating on Selections" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Selecting-Subformulas.html#Selecting-Subformulas"
  rel="up" title="Selecting Subformulas" />
  <link href=
  "Rearranging-with-Selections.html#Rearranging-with-Selections"
  rel="next" title="Rearranging with Selections" />
  <link href="Displaying-Selections.html#Displaying-Selections"
  rel="prev" title="Displaying Selections" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Operating-on-Selections" id=
  "Operating-on-Selections"></a>

  <div class="header">
    <p>Next: <a href=
    "Rearranging-with-Selections.html#Rearranging-with-Selections"
    accesskey="n" rel="next">Rearranging with Selections</a>,
    Previous: <a href=
    "Displaying-Selections.html#Displaying-Selections" accesskey=
    "p" rel="prev">Displaying Selections</a>, Up: <a href=
    "Selecting-Subformulas.html#Selecting-Subformulas" accesskey=
    "u" rel="up">Selecting Subformulas</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Operating-on-Selections-1" id=
  "Operating-on-Selections-1"></a>

  <h4 class="subsection">10.1.4 Operating on Selections</h4>

  <p>Once a selection is made, all Calc commands that manipulate
  items on the stack will operate on the selected portions of the
  items instead. (Note that several stack elements may have
  selections at once, though there can be only one selection at a
  time in any given stack element.)</p><a name="index-j-e" id=
  "index-j-e"></a> <a name="index-calc_002denable_002dselections"
  id="index-calc_002denable_002dselections"></a>

  <p>The <kbd>j e</kbd> (<code>calc-enable-selections</code>)
  command disables the effect that selections have on Calc
  commands. The current selections still exist, but Calc commands
  operate on whole stack elements anyway. This mode can be
  identified by the fact that the &lsquo;<samp>*</samp>&rsquo;
  markers on the line numbers are gone, even though selections are
  visible. To reactivate the selections, press <kbd>j e</kbd>
  again.</p>

  <p>To extract a sub-formula as a new formula, simply select the
  sub-formula and press <tt class="key">RET</tt>. This normally
  duplicates the top stack element; here it duplicates only the
  selected portion of that element.</p>

  <p>To replace a sub-formula with something different, you can
  enter the new value onto the stack and press <tt class=
  "key">TAB</tt>. This normally exchanges the top two stack
  elements; here it swaps the value you entered into the selected
  portion of the formula, returning the old selected portion to the
  top of the stack.</p>

  <div class="smallexample">
    <pre class="smallexample">
           3    ...                    ...                    ___
    (a + b)  . . .           17 x y . . .           17 x y + V c
2*  ...............      2*  .............      2:  -------------
        . . . .                 . . . .                2 x + 1

                                    3                      3
1:  17 x y               1:  (a + b)            1:  (a + b)
</pre>
  </div>

  <p>In this example we select a sub-formula of our original
  example, enter a new formula, <tt class="key">TAB</tt> it into
  place, then deselect to see the complete, edited formula.</p>

  <p>If you want to swap whole formulas around even though they
  contain selections, just use <kbd>j e</kbd> before and
  after.</p><a name="index-j-_0027" id="index-j-_0027"></a>
  <a name="index-calc_002denter_002dselection" id=
  "index-calc_002denter_002dselection"></a>

  <p>The <kbd>j '</kbd> (<code>calc-enter-selection</code>) command
  is another way to replace a selected sub-formula. This command
  does an algebraic entry just like the regular <kbd>'</kbd> key.
  When you press <tt class="key">RET</tt>, the formula you type
  replaces the original selection. You can use the
  &lsquo;<samp>$</samp>&rsquo; symbol in the formula to refer to
  the original selection. If there is no selection in the formula
  under the cursor, the cursor is used to make a temporary
  selection for the purposes of the command. Thus, to change a term
  of a formula, all you have to do is move the Emacs cursor to that
  term and press <kbd>j '</kbd>.</p><a name="index-j-_0060" id=
  "index-j-_0060"></a> <a name="index-calc_002dedit_002dselection"
  id="index-calc_002dedit_002dselection"></a>

  <p>The <kbd>j `</kbd> (<code>calc-edit-selection</code>) command
  is a similar analogue of the <kbd>`</kbd>
  (<code>calc-edit</code>) command. It edits the selected
  sub-formula in a separate buffer. If there is no selection, it
  edits the sub-formula indicated by the cursor.</p>

  <p>To delete a sub-formula, press <tt class="key">DEL</tt>. This
  generally replaces the sub-formula with the constant zero, but in
  a few suitable contexts it uses the constant one instead. The
  <tt class="key">DEL</tt> key automatically deselects and
  re-simplifies the entire formula afterwards. Thus:</p>

  <div class="smallexample">
    <pre class="smallexample">
              ###
    17 x y + # #          17 x y         17 # y          17 y
1*  -------------     1:  -------    1*  -------    1:  -------
       2 x + 1            2 x + 1        2 x + 1        2 x + 1
</pre>
  </div>

  <p>In this example, we first delete the
  &lsquo;<samp>sqrt(c)</samp>&rsquo; term; Calc accomplishes this
  by replacing &lsquo;<samp>sqrt(c)</samp>&rsquo; with zero and
  resimplifying. We then delete the <kbd>x</kbd> in the numerator;
  since this is part of a product, Calc replaces it with
  &lsquo;<samp>1</samp>&rsquo; and resimplifies.</p>

  <p>If you select an element of a vector and press <tt class=
  "key">DEL</tt>, that element is deleted from the vector. If you
  delete one side of an equation or inequality, only the opposite
  side remains.</p><a name="index-j-DEL" id="index-j-DEL"></a>
  <a name="index-calc_002ddel_002dselection" id=
  "index-calc_002ddel_002dselection"></a>

  <p>The <kbd>j <span class="key">DEL</span></kbd>
  (<code>calc-del-selection</code>) command is like <tt class=
  "key">DEL</tt> but with the auto-selecting behavior of <kbd>j
  '</kbd> and <kbd>j `</kbd>. It deletes the selected portion of
  the formula indicated by the cursor, or, in the absence of a
  selection, it deletes the sub-formula indicated by the cursor
  position.</p><a name="index-j-RET" id="index-j-RET"></a> <a name=
  "index-calc_002dgrab_002dselection" id=
  "index-calc_002dgrab_002dselection"></a>

  <p>(There is also an auto-selecting <kbd>j <span class=
  "key">RET</span></kbd> (<code>calc-copy-selection</code>)
  command.)</p>

  <p>Normal arithmetic operations also apply to sub-formulas. Here
  we select the denominator, press <kbd>5 -</kbd> to subtract five
  from the denominator, press <kbd>n</kbd> to negate the
  denominator, then press <kbd>Q</kbd> to take the square root.</p>

  <div class="smallexample">
    <pre class="smallexample">
     .. .           .. .           .. .             .. .
1*  .......    1*  .......    1*  .......    1*  ..........
    2 x + 1        2 x - 4        4 - 2 x         _________
                                                 V 4 - 2 x
</pre>
  </div>

  <p>Certain types of operations on selections are not allowed. For
  example, for an arithmetic function like <kbd>-</kbd> no more
  than one of the arguments may be a selected sub-formula. (As the
  above example shows, the result of the subtraction is spliced
  back into the argument which had the selection; if there were
  more than one selection involved, this would not be
  well-defined.) If you try to subtract two selections, the command
  will abort with an error message.</p>

  <p>Operations on sub-formulas sometimes leave the formula as a
  whole in an &ldquo;un-natural&rdquo; state. Consider negating the
  &lsquo;<samp>2 x</samp>&rsquo; term of our sample formula by
  selecting it and pressing <kbd>n</kbd>
  (<code>calc-change-sign</code>).</p>

  <div class="smallexample">
    <pre class="smallexample">
       .. .                .. .
1*  ..........      1*  ...........
     .........           ..........
    . . . 2 x           . . . -2 x
</pre>
  </div>

  <p>Unselecting the sub-formula reveals that the minus sign, which
  would normally have canceled out with the subtraction
  automatically, has not been able to do so because the subtraction
  was not part of the selected portion. Pressing <kbd>=</kbd>
  (<code>calc-evaluate</code>) or doing any other mathematical
  operation on the whole formula will cause it to be
  simplified.</p>

  <div class="smallexample">
    <pre class="smallexample">
       17 y                17 y
1:  -----------     1:  ----------
     __________          _________
    V 4 - -2 x          V 4 + 2 x
</pre>
  </div>
  <hr />

  <div class="header">
    <p>Next: <a href=
    "Rearranging-with-Selections.html#Rearranging-with-Selections"
    accesskey="n" rel="next">Rearranging with Selections</a>,
    Previous: <a href=
    "Displaying-Selections.html#Displaying-Selections" accesskey=
    "p" rel="prev">Displaying Selections</a>, Up: <a href=
    "Selecting-Subformulas.html#Selecting-Subformulas" accesskey=
    "u" rel="up">Selecting Subformulas</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
