<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Copyright (C) 1995-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being "A GNU Manual",
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.18.1), see www.w3.org" />

  <title>Gnus Manual: X-Face</title>
  <meta name="description" content="Gnus Manual: X-Face" />
  <meta name="keywords" content="Gnus Manual: X-Face" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Index.html#Index" rel="index" title="Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Image-Enhancements.html#Image-Enhancements" rel="up"
  title="Image Enhancements" />
  <link href="Face.html#Face" rel="next" title="Face" />
  <link href="Image-Enhancements.html#Image-Enhancements" rel=
  "prev" title="Image Enhancements" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="X_002dFace" id="X_002dFace"></a>

  <div class="header">
    <p>Next: <a href="Face.html#Face" accesskey="n" rel=
    "next">Face</a>, Up: <a href=
    "Image-Enhancements.html#Image-Enhancements" accesskey="u" rel=
    "up">Image Enhancements</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Index.html#Index" title=
    "Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="X_002dFace-1" id="X_002dFace-1"></a>

  <h4 class="subsection">9.14.1 X-Face</h4><a name=
  "index-x_002dface-1" id="index-x_002dface-1"></a>

  <p><code>X-Face</code> headers describe a 48x48 pixel
  black-and-white (1 bit depth) image that&rsquo;s supposed to
  represent the author of the message. It seems to be supported by
  an ever-growing number of mail and news readers.</p><a name=
  "index-x_002dface-2" id="index-x_002dface-2"></a> <a name=
  "index-gnus_002darticle_002ddisplay_002dx_002dface-1" id=
  "index-gnus_002darticle_002ddisplay_002dx_002dface-1"></a>
  <a name="index-gnus_002darticle_002dx_002dface_002dcommand" id=
  "index-gnus_002darticle_002dx_002dface_002dcommand"></a> <a name=
  "index-gnus_002darticle_002dx_002dface_002dtoo_002dugly" id=
  "index-gnus_002darticle_002dx_002dface_002dtoo_002dugly"></a>

  <p>Viewing an <code>X-Face</code> header either requires an Emacs
  that has &lsquo;<samp>compface</samp>&rsquo; support (which most
  XEmacs versions have), or that you have suitable conversion or
  display programs installed. If your Emacs has image support the
  default action is to display the face before the
  <code>From</code> header. If there&rsquo;s no native
  <code>X-Face</code> support, Gnus will try to convert the
  <code>X-Face</code> header using external programs from the
  <code>pbmplus</code> package and friends, see below. For XEmacs
  it&rsquo;s faster if XEmacs has been compiled with
  <code>X-Face</code> support. The default action under Emacs
  without image support is to fork off the <code>display</code>
  program.</p>

  <p>On a GNU/Linux system, the <code>display</code> program is
  included in the ImageMagick package. For external conversion
  programs look for packages with names like <code>netpbm</code>,
  <code>libgr-progs</code> and <code>compface</code>. On Windows,
  you may use the packages <code>netpbm</code> and
  <code>compface</code> from <a href=
  "http://gnuwin32.sourceforge.net">http://gnuwin32.sourceforge.net</a>.
  You need to add the <code>bin</code> directory to your
  <code>PATH</code> environment variable.</p>

  <p>The variable <code>gnus-article-x-face-command</code> controls
  which programs are used to display the <code>X-Face</code>
  header. If this variable is a string, this string will be
  executed in a sub-shell. If it is a function, this function will
  be called with the face as the argument. If
  <code>gnus-article-x-face-too-ugly</code> (which is a regexp)
  matches the <code>From</code> header, the face will not be
  shown.</p>

  <p>(Note: <code>x-face</code> is used in the variable/function
  names, not <code>xface</code>).</p>

  <p>Face and variable:</p>

  <dl compact="compact">
    <dt><code>gnus-x-face</code></dt>

    <dd>
      <a name="index-gnus_002dx_002dface" id=
      "index-gnus_002dx_002dface"></a>

      <p>Face to show X-Face. The colors from this face are used as
      the foreground and background colors of the displayed
      X-Faces. The default colors are black and white.</p>
    </dd>

    <dt><code>gnus-face-properties-alist</code></dt>

    <dd>
      <a name="index-gnus_002dface_002dproperties_002dalist" id=
      "index-gnus_002dface_002dproperties_002dalist"></a>

      <p>Alist of image types and properties applied to Face (see
      <a href="Face.html#Face">Face</a>) and X-Face images. The
      default value is <code>((pbm . (:face gnus-x-face)) (png .
      nil))</code> for Emacs or <code>((xface . (:face
      gnus-x-face)))</code> for XEmacs. Here are examples:</p>

      <div class="lisp">
        <pre class="lisp">
;; Specify the altitude of Face and X-Face images in the From header.
(setq gnus-face-properties-alist
      '((pbm . (:face gnus-x-face :ascent 80))
        (png . (:ascent 80))))

;; Show Face and X-Face images as pressed buttons.
(setq gnus-face-properties-alist
      '((pbm . (:face gnus-x-face :relief -2))
        (png . (:relief -2))))
</pre>
      </div>

      <p>see <a href=
      "http://www.gnu.org/software/emacs/manual/html_node/elisp/Image-Descriptors.html#Image-Descriptors">
      Image Descriptors</a> in <cite>The Emacs Lisp Reference
      Manual</cite> for the valid properties for various image
      types. Currently, <code>pbm</code> is used for X-Face images
      and <code>png</code> is used for Face images in Emacs. Only
      the <code>:face</code> property is effective on the
      <code>xface</code> image type in XEmacs if it is built with
      the &lsquo;<samp>libcompface</samp>&rsquo; library.</p>
    </dd>
  </dl>

  <p>If you use posting styles, you can use an
  <code>x-face-file</code> entry in
  <code>gnus-posting-styles</code>, See <a href=
  "Posting-Styles.html#Posting-Styles">Posting Styles</a>. If you
  don&rsquo;t, Gnus provides a few convenience functions and
  variables to allow easier insertion of X-Face headers in outgoing
  messages. You also need the above mentioned ImageMagick, netpbm
  or other image conversion packages (depending the values of the
  variables below) for these functions.</p><a name=
  "index-gnus_002drandom_002dx_002dface" id=
  "index-gnus_002drandom_002dx_002dface"></a> <a name=
  "index-gnus_002dconvert_002dpbm_002dto_002dx_002dface_002dcommand"
  id=
  "index-gnus_002dconvert_002dpbm_002dto_002dx_002dface_002dcommand">
  </a> <a name="index-gnus_002dx_002dface_002ddirectory" id=
  "index-gnus_002dx_002dface_002ddirectory"></a>

  <p><code>gnus-random-x-face</code> goes through all the
  &lsquo;<samp>pbm</samp>&rsquo; files in
  <code>gnus-x-face-directory</code> and picks one at random, and
  then converts it to the X-Face format by using the
  <code>gnus-convert-pbm-to-x-face-command</code> shell command.
  The &lsquo;<samp>pbm</samp>&rsquo; files should be 48x48 pixels
  big. It returns the X-Face header data as a string.</p><a name=
  "index-gnus_002dinsert_002drandom_002dx_002dface_002dheader" id=
  "index-gnus_002dinsert_002drandom_002dx_002dface_002dheader"></a>

  <p><code>gnus-insert-random-x-face-header</code> calls
  <code>gnus-random-x-face</code> and inserts a
  &lsquo;<samp>X-Face</samp>&rsquo; header with the randomly
  generated data.</p><a name=
  "index-gnus_002dx_002dface_002dfrom_002dfile" id=
  "index-gnus_002dx_002dface_002dfrom_002dfile"></a> <a name=
  "index-gnus_002dconvert_002dimage_002dto_002dx_002dface_002dcommand"
  id=
  "index-gnus_002dconvert_002dimage_002dto_002dx_002dface_002dcommand">
  </a>

  <p><code>gnus-x-face-from-file</code> takes a GIF file as the
  parameter, and then converts the file to X-Face format by using
  the <code>gnus-convert-image-to-x-face-command</code> shell
  command.</p>

  <p>Here&rsquo;s how you would typically use the first function.
  Put something like the following in your <samp>~/.gnus.el</samp>
  file:</p>

  <div class="lisp">
    <pre class="lisp">
(setq message-required-news-headers
      (nconc message-required-news-headers
             (list '(X-Face . gnus-random-x-face))))
</pre>
  </div>

  <p>Using the last function would be something like this:</p>

  <div class="lisp">
    <pre class="lisp">
(setq message-required-news-headers
      (nconc message-required-news-headers
             (list '(X-Face . (lambda ()
                                (gnus-x-face-from-file
                                 "~/My-face.gif"))))))
</pre>
  </div>
  <hr />

  <div class="header">
    <p>Next: <a href="Face.html#Face" accesskey="n" rel=
    "next">Face</a>, Up: <a href=
    "Image-Enhancements.html#Image-Enhancements" accesskey="u" rel=
    "up">Image Enhancements</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Index.html#Index" title=
    "Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
