*** lisp/files.el	27 Feb 2008 05:10:08 +0000	1.896.2.40
--- lisp/files.el	10 Mar 2008 23:30:02 +0000	
***************
*** 985,990 ****
--- 985,1021 ----
  	 (locale-coding-system nil))
      (rename-file encoded new-encoded ok-if-already-exists)
      newname))
+ 
+ (defun forward-filename (arg)
+   "Move point forward arg filenames (backward if arg is negative)."
+   (interactive "p")
+   (if (< arg 0)
+       (progn
+ 	(backward-char)
+ 	(while (< arg 0)
+ 	  (re-search-backward "[/\n]" nil t)
+ 	  (incf arg))
+ 	(forward-char))
+     (forward-char)
+     (while (> 0 arg )
+       (re-search-forward "[/\n]" nil t)
+       (decf arg))
+     (backward-char)))
+ 
+ (defun kill-filename (arg)
+   "Kill characters forward until up to the end of a filename.
+ With argument, do this that many times."
+   (interactive "p")
+   (kill-region (point) (progn (forward-filename arg) (point))))
+ 
+ (defun backward-kill-filename (arg)
+   "Kill characters backward up to the beginning of a filename.
+ With argument, do this that many times."
+   (interactive "p")
+   (kill-filename (- arg)))
+ 
+ (define-key minibuffer-local-filename-completion-map 
+   [remap backward-kill-word] 'backward-kill-filename)
  
  (defun switch-to-buffer-other-window (buffer &optional norecord)
    "Select buffer BUFFER in another window.
